{% extends "base.html" %} {% load static %} {% block title %}Weekly Meal Planner | Meal Prep Codex{% endblock %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/preepweek.css' %}" />
{% endblock %} {% block content %}

<div class="container">
  <div class="header">
    <h1 class="text-3xl font-bold">Weekly Meal Planner</h1>
    <div>
      <button class="btn">💾 Save Plan</button>
      <button class="btn secondary" onclick="openProfileModal()">🧍 Set Profile</button>
    </div>
  </div>

  <div class="prep-options">
    <div class="prep-option active">🔁 Cook each day</div>
    <div class="prep-option">📦 Prep for 2 days</div>
    <div class="prep-option">🧊 Prep for whole week</div>
    <button class="btn secondary" style="margin-left: auto">🕐 Show Prep Days</button>
  </div>

  <div class="action-buttons">
    <button class="btn secondary" onclick="openPreferencesModal()">⚙ Preferences</button>
    <button class="btn" id="generate-grocery">🧾 Generate Grocery List</button>
    <button class="btn secondary">⏱ Copy to Next Day</button>
    <button class="btn secondary">🧹 Clear All</button>
    <button class="btn secondary">🖨 Print / PDF</button>
  </div>

  <div class="calendar">
    <!-- Day headers -->
    <div class="day-header">Monday</div>
    <div class="day-header">Tuesday</div>
    <div class="day-header">Wednesday</div>
    <div class="day-header">Thursday</div>
    <div class="day-header">Friday</div>
    <div class="day-header">Saturday</div>
    <div class="day-header">Sunday</div>

    <!-- Breakfast slots -->
    <div class="meal-slot">
      <div class="meal-time">Breakfast</div>
      <div class="meal-content">Scrambled eggs with toast</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Breakfast</div>
      <div class="meal-content">Greek yogurt with granola</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Breakfast</div>
      <div class="meal-content">Oatmeal with berries</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Breakfast</div>
      <div class="meal-content">Pancakes</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>

    <!-- Lunch slots -->
    <div class="meal-slot connected">
      <div class="meal-time">Lunch</div>
      <div class="meal-content">Chicken Caesar salad</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot connected reused-meal" data-source-day="Monday">
      <div class="meal-time">Lunch <span class="source-tag">(from Monday)</span></div>
      <div class="meal-content">Chicken Caesar salad</div>
      <button class="add-meal">✏️ Edit</button>
    </div>

    <div class="meal-slot">
      <div class="meal-time">Lunch</div>
      <div class="meal-content">Turkey sandwich</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Lunch</div>
      <div class="meal-content">Vegetable stir fry</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Lunch</div>
      <div class="meal-content">Pasta salad</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>

    <!-- Dinner slots -->
    <div class="meal-slot">
      <div class="meal-time">Dinner</div>
      <div class="meal-content">Grilled salmon with veggies</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Dinner</div>
      <div class="meal-content">Beef tacos</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Dinner</div>
      <div class="meal-content">Chicken curry</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>
    <div class="meal-slot">
      <div class="meal-time">Dinner</div>
      <div class="meal-content">Pizza night</div>
      <button class="add-meal">✏️ Edit</button>
    </div>
    <div class="meal-slot empty">
      <button class="add-meal">+ Add Meal</button>
    </div>

    <!-- In your calendar grid, after lunch slots and before dinner slots, add: -->
    <!-- Nutrient Summary Slots -->
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1850kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 92%"></div>
        </div>
      </div>
    </div>
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1720kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 86%"></div>
        </div>
      </div>
    </div>
    <!-- Add 5 more for each day -->
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1850kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 92%"></div>
        </div>
      </div>
    </div>
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1720kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 86%"></div>
        </div>
      </div>
    </div>
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1850kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 92%"></div>
        </div>
      </div>
    </div>
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1720kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 86%"></div>
        </div>
      </div>
    </div>
    <div class="meal-slot nutrient-summary">
      <div class="nutrient-day">
        <div class="nutrient-item">Calories: 1720kcal</div>
        <div class="nutrient-bar">
          <div class="nutrient-progress nutrient-optimal" style="width: 86%"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Meal Selection Modal -->
<div class="modal" id="meal-modal">
  <div class="modal-content">
    <span class="close-modal">×</span>
    <h2>Select a Meal</h2>

    <div>
      <label>Filter by:</label>
      <select>
        <option>All Types</option>
        <option>🍗 Chicken</option>
        <option>🥩 Beef</option>
        <option>🐟 Fish</option>
        <option>🥦 Vegan</option>
        <option>🍝 Pasta</option>
      </select>
    </div>

    <div class="meal-types">
      <div class="meal-type">
        <div>🍗</div>
        <div>Grilled Chicken</div>
        <div class="small">30 min • 450 cal</div>
      </div>
      <div class="meal-type">
        <div>🥩</div>
        <div>Beef Tacos</div>
        <div class="small">25 min • 550 cal</div>
      </div>
      <div class="meal-type">
        <div>🐟</div>
        <div>Salmon Salad</div>
        <div class="small">20 min • 400 cal</div>
      </div>
      <div class="meal-type">
        <div>🥦</div>
        <div>Veggie Stir Fry</div>
        <div class="small">15 min • 350 cal</div>
      </div>
      <div class="meal-type">
        <div>🍝</div>
        <div>Pasta Alfredo</div>
        <div class="small">35 min • 600 cal</div>
      </div>
      <div class="meal-type">
        <div>🍗</div>
        <div>Chicken Curry</div>
        <div class="small">40 min • 500 cal</div>
      </div>
    </div>

    <button class="btn" style="width: 100%; margin-top: 15px">View Recipe Details</button>
  </div>
</div>

<!-- Grocery List Sidebar -->
<div class="grocery-sidebar" id="grocery-sidebar">
  <span class="close-modal" onclick="closeGrocerySidebar()">×</span>
  <h2>Grocery List</h2>

  <div class="grocery-category">
    <h3>Produce</h3>
    <div class="grocery-item">
      <span>Tomatoes</span>
      <span>4</span>
    </div>
    <div class="grocery-item">
      <span>Lettuce</span>
      <span>1 head</span>
    </div>
    <div class="grocery-item">
      <span>Bell peppers</span>
      <span>3</span>
    </div>
  </div>

  <div class="grocery-category">
    <h3>Meat & Fish</h3>
    <div class="grocery-item">
      <span>Chicken breast</span>
      <span>2 lbs</span>
    </div>
    <div class="grocery-item">
      <span>Ground beef</span>
      <span>1 lb</span>
    </div>
    <div class="grocery-item">
      <span>Salmon fillet</span>
      <span>1 lb</span>
    </div>
  </div>

  <div class="grocery-category">
    <h3>Dairy</h3>
    <div class="grocery-item">
      <span>Eggs</span>
      <span>12</span>
    </div>
    <div class="grocery-item">
      <span>Milk</span>
      <span>1 gal</span>
    </div>
    <div class="grocery-item">
      <span>Cheese</span>
      <span>8 oz</span>
    </div>
  </div>

  <button class="btn" style="width: 100%; margin-top: 15px">Print List</button>
</div>

<div id="profile-modal" class="modal">
  <div class="modal-content bg-white rounded-lg shadow-lg overflow-hidden">
    <span class="close-modal top-0 right-0 p-4" onclick="closeProfileModal()">×</span>
    <h2 class="text-2xl font-bold text-center">Daily Calorie Intake Calculator</h2>
    <p class="text-center">For accurate calculation, we need some basic info about you</p>

    <form id="profile-form" class="space-y-4 p-4">
      <label class="block">
        1. What is your sex?
      </label>
      <div class="flex space-x-4">
        <label class="flex items-center">
          <input type="radio" name="sex" value="male" required class="mr-2" />
          Male
        </label>
        <label class="flex items-center">
          <input type="radio" name="sex" value="female" class="mr-2" />
          Female
        </label>
      </div>

      <label class="block">
        2. How old are you?
      </label>
      <input type="number" name="age" required class="w-full px-4 py-2 border rounded-md" />

      <label class="block">
        3. How tall are you?
      </label>
      <input type="number" name="height" required class="w-full px-4 py-2 border rounded-md" />

      <label class="block">
        4. How much do you weigh?
      </label>
      <input type="number" name="weight" required class="w-full px-4 py-2 border rounded-md" />

      <label class="block">
        5. How active are you on a daily basis?
      </label>
      <select name="activity" required class="w-full px-4 py-2 border rounded-md">
        <option value="1.2">Lightly active (mostly sitting)</option>
        <option value="1.375">Moderately active (mostly standing)</option>
        <option value="1.55">Active (mostly walking)</option>
        <option value="1.725">Very active (physically demanding)</option>
      </select>

      <button type="submit" class="w-full px-4 py-2 bg-blue-500 text-white rounded-md">Calculate Calories</button>
    </form>

    <div id="calorie-result" class="p-4 text-xl font-bold text-center"></div>
  </div>
</div>

<div class="modal" id="preferences-modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closePreferencesModal()">×</span>
    <h2>Meal Preferences</h2>

    <div class="preference-section">
      <h3>Protein Preferences</h3>
      <div class="preference-options">
        <label><input type="checkbox" name="protein" value="chicken" checked /> 🍗 Chicken</label>
        <label><input type="checkbox" name="protein" value="beef" checked /> 🥩 Beef</label>
        <label><input type="checkbox" name="protein" value="fish" checked /> 🐟 Fish</label>
        <label><input type="checkbox" name="protein" value="pork" checked /> 🐖 Pork</label>
        <label><input type="checkbox" name="protein" value="vegan" /> 🥦 Vegan</label>
        <label><input type="checkbox" name="protein" value="vegetarian" /> 🥬 Vegetarian</label>
      </div>
    </div>

    <div class="preference-section">
      <h3>Carb Preferences</h3>
      <div class="preference-options">
        <label><input type="checkbox" name="carb" value="rice" checked /> 🍚 Rice</label>
        <label><input type="checkbox" name="carb" value="pasta" checked /> 🍝 Pasta</label>
        <label><input type="checkbox" name="carb" value="potato" checked /> 🥔 Potato</label>
        <label><input type="checkbox" name="carb" value="bread" checked /> 🍞 Bread</label>
        <label><input type="checkbox" name="carb" value="quinoa" /> 🌾 Quinoa</label>
      </div>
    </div>

    <div class="preference-section">
      <h3>Banned Ingredients</h3>
      <div class="preference-options">
        <div class="banned-ingredients-input">
          <input type="text" id="new-banned-ingredient" placeholder="Add ingredient to ban" />
          <button class="btn secondary" onclick="addBannedIngredient()">Add</button>
        </div>
        <div id="banned-ingredients-list" class="banned-ingredients-list">
          <!-- Dynamically populated -->
        </div>
      </div>
    </div>

    <div class="preference-section">
      <h3>Other Preferences</h3>
      <div class="preference-options">
        <label><input type="checkbox" name="preference" value="quick" /> ⏱ Quick meals only (&lt;30 min)</label>
        <label><input type="checkbox" name="preference" value="low-carb" /> 🍃 Low-carb options</label>
        <label><input type="checkbox" name="preference" value="high-protein" /> 💪 High-protein</label>
        <label><input type="checkbox" name="preference" value="gluten-free" /> 🌾 Gluten-free</label>
        <label><input type="checkbox" name="preference" value="dairy-free" /> 🥛 Dairy-free</label>
      </div>
    </div>

    <button class="btn" onclick="savePreferences()" style="margin-top: 20px">Save Preferences</button>
  </div>
</div>

{% endblock %} {% block extra_js %}
<script src="{% static 'js/preepweek.js' %}"></script>
{% endblock %}
